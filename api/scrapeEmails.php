<?php
ini_set('max_execution_time',0);
$urls= [
  "/organisation/3DDesign/",
  "/organisation/9681/",
  "/organisation/10099/",
  "/organisation/11695/",
  "/organisation/6304/",
  "/organisation/6313/",
  "/organisation/9813/",
  "/organisation/10416/",
  "/organisation/10426/",
  "/organisation/9249/",
  "/organisation/ChemSoc/",
  "/organisation/9599/",
  "/organisation/9747/",
  "/organisation/9609/",
  "/organisation/contemporaryfinearts/",
  "/organisation/9526/",
  "/organisation/10656/",
  "/organisation/ecologicalsociety/",
  "/organisation/11567/",
  "/organisation/9991/",
  "/organisation/eventsoc/",
  "/organisation/FINANCESOCIETY/",
  "/organisation/10666/",
  "/organisation/hgsliteraturesociety/",
  "/organisation/10686/",
  "/organisation/9554/",
  "/organisation/11010/",
  "/organisation/6871/",
  "/organisation/MantellGeoSoc/",
  "/organisation/11020/",
  "/organisation/11030/",
  "/organisation/11588/",
  "/organisation/PALS/",
  "/organisation/PharmSoc/",
  "/organisation/psychsoc/",
  "/organisation/9779/",
  "/organisation/7078/",
  "/organisation/11927/",
  "/organisation/10706/",
  "/organisation/10522/",
  "/organisation/10716/",
  "/organisation/10736/",
  "/organisation/10726/",
  "/organisation/10746/",
  "/organisation/AnimeAndManga/",
  "/organisation/11488/",
  "/organisation/9391/",
  "/organisation/6421/",
  "/organisation/10239/",
  "/organisation/digisoc/",
  "/organisation/6556/",
  "/organisation/11050/",
  "/organisation/11907/",
  "/organisation/11917/",
  "/organisation/11897/",
  "/organisation/brightonmusicsociety/",
  "/organisation/11578/",
  "/organisation/11867/",
  "/organisation/11795/",
  "/organisation/studentmedia/",
  "/organisation/TheVerse/",
  "/organisation/BSMSFoMSF/",
  "/organisation/9803/",
  "/organisation/11095/",
  "/organisation/6484/",
  "/organisation/11775/",
  "/organisation/11103/",
  "/organisation/6574/",
  "/organisation/6628/",
  "/organisation/11297/",
  "/organisation/11000/",
  "/organisation/11725/",
  "/organisation/11498/",
  "/organisation/RaGBrighton/",
  "/organisation/RaGEastbourne/",
  "/organisation/RaGHastings/",
  "/organisation/10391/",
  "/organisation/11973/",
  "/organisation/6178/",
  "/organisation/11547/",
  "/organisation/10636/",
  "/organisation/EastAfricanSociety/",
  "/organisation/6214/",
  "/organisation/11138/",
  "/organisation/11277/",
  "/organisation/11118/",
  "/organisation/11653/",
  "/organisation/HellenicSociety/",
  "/organisation/11953/",
  "/organisation/10440/",
  "/organisation/9649/",
  "/organisation/6817/",
  "/organisation/IntStudentSoc/",
  "/organisation/10909/",
  "/organisation/6340/",
  "/organisation/10212/",
  "/organisation/9660/",
  "/organisation/10756/",
  "/organisation/7659/",
  "/organisation/6286/",
  "/organisation/BrightonCU/",
  "/organisation/6502/",
  "/organisation/6511/",
  "/organisation/deeperlifebrighton/",
  "/organisation/FCF/",
  "/organisation/9639/",
  "/organisation/6826/",
  "/organisation/6961/",
  "/organisation/6844/",
  "/organisation/11287/",
  "/organisation/11537/",
  "/organisation/10079/",
  "/organisation/9246/",
  "/organisation/BakeSoc/",
  "/organisation/11521/",
  "/organisation/BeardSociety/",
  "/organisation/WavesCheerleaders/",
  "/organisation/10406/",
  "/organisation/11128/",
  "/organisation/11963/",
  "/organisation/11765/",
  "/organisation/11158/",
  "/organisation/11715/",
  "/organisation/CyclingSociety/",
  "/organisation/10119/",
  "/organisation/eSports/",
  "/organisation/10796/",
  "/organisation/10806/",
  "/organisation/GamingSociety/",
  "/organisation/10816/",
  "/organisation/10199/",
  "/organisation/HastingsSociety/",
  "/organisation/10512/",
  "/organisation/10876/",
  "/organisation/InvestmentTradingSoc/",
  "/organisation/LadiesOnlyCombat/",
  "/organisation/LiteratureSociety/",
  "/organisation/9701/",
  "/organisation/MASS/",
  "/organisation/11735/",
  "/organisation/11815/",
  "/organisation/11755/",
  "/organisation/11785/",
  "/organisation/7655/",
  "/organisation/10836/",
  "/organisation/11745/",
  "/organisation/11665/",
  "/organisation/11643/",
  "/organisation/RPGSociety/",
  "/organisation/11805/",
  "/organisation/11685/",
  "/organisation/11040/",
  "/organisation/10129/",
  "/organisation/11237/",
  "/organisation/10786/",
  "/organisation/10856/",
  "/organisation/11675/",
  "/organisation/Bodybuilding/",
  "/organisation/10866/",
  "/organisation/10139/",
  "/organisation/11388/",
  "/organisation/10846/",
  "/organisation/6019/",
  "/organisation/FemSoc/",
  "/organisation/11705/",
  "/organisation/6691/",
  "/organisation/LGBrighTon/",
  "/organisation/10826/",
  "/organisation/6889/",
  "/organisation/11084/",
  "/organisation/10001/",
  "/organisation/BrightonBikeCoop/",
  "/organisation/BrightonFoodCoop/",
  "/organisation/9248/",
  "/organisation/10646/",
  "/organisation/9737/",
  "/organisation/11887/"
];
$host = "https://www.brightonsu.com";

if(isset($_GET['url']) && $_GET['url']){
  $host = '';
  $urls = [$_GET['url']];
}

$agent= 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36';
$ch = curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_VERBOSE, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, $agent);

foreach($urls as $url){
  echo "<h3>".$url."</h3>";
  curl_setopt($ch, CURLOPT_URL,$host.$url);
  $html=curl_exec($ch);
  $res = preg_match_all(
    "/[A-Z0-9][A-Z0-9._%+-]{0,63}@(?:(?=[A-Z0-9-]{1,63}\.)[A-Z0-9]+(?:-[A-Z0-9]+)*\.){1,8}[A-Z]{2,63}/i",
    $html,
    $matches
  );
  if ($res) {
    foreach(array_unique($matches[0]) as $email) {
      echo $email . "<br />";
    }
  }
  else {
    echo "No emails found<br />";
  }
}
